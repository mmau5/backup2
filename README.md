# 12.8 Резервное копирование баз данных - Зябликова Анастасия

# Задание 1

1.1 Для такой задачи надежнее всего подойдет вариант Полного бэкапа с Дифференциальным, т.к есть возможность сохранить все данные и отличия текущего фулл бэкапа от предыдущего. 

Вариант с использованием фулл бэкапа и инкрементального не подходит так так в процессе копируются только те данные, которые были изменены с момента предыдущего бэкапа. Плюс в случае повреждения цепочки данных, восстановление будет невозможно.


1.2 Для того, чтобы не потерять ценные данные можно сделать несколько резервных копий на разных устройствах и попробовать разные комбинации Дифференциального и Инкрементального копирования. В случае восстановления за час до поломки необходимо выполнять резервное копирование каждый час. Для такого условия подойдет вариант полного и инкрементального бэкапа, т.к позволит сэкономить ресурсы. Но такой вариант недостаточно надежен, т.к в случае повреждения данных восстановление будет невозможно, поэтому можно использовать вариант с фулл бэкапом и дифференциальным.

# Задание 2

2.1 

Резервная копия

 pg_dump -U <user> -W  -h <host> -p <port> <datastore> > /tmp/<datastore-backup>.dump

Восстановление 

pg_restore -U <user> -W -h <host> -p <port> -d <datastore> /tmp/<datastore-backup>.bak



# Задание 3


3.1 
Полный бэкап с помощью утилиты XtraBackup
# xtrabackup --backup --user=root --password='...' --target-dir=/root/backupdb/full


На основе полного бэкапа инкрементальный

# xtrabackup --backup --target-dir=/root/backupdb/inc1 --incremental-basedir=/root/backupdb/full
